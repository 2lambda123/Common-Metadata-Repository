<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>REST API Usage</title><script src="https://cdn.earthdata.nasa.gov/tophat2/tophat2.js" id="earthdata-tophat-script" data-show-fbm="true" data-show-status="true" data-status-api-url="https://status.earthdata.nasa.gov/api/v1/notifications" data-status-polling-interval="10"></script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/atom-one-dark.css" /><script type="text/javascript" src="highlight/highlight.pack.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="earthdata-tophat2" style="height: 32px;"></div><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with the <a href="https://github.com/cmr-exchange/codox-theme">NASA EOSDIS</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">CMR OPeNDAP</span> <span class="project-version">1.0.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="0000-intro.html"><div class="inner"><span>Introduction</span></div></a></li><li class="depth-1 "><a href="0250-setup.html"><div class="inner"><span>Setup</span></div></a></li><li class="depth-1 "><a href="0500-configuration.html"><div class="inner"><span>Configuration</span></div></a></li><li class="depth-1 "><a href="0750-tests.html"><div class="inner"><span>Tests</span></div></a></li><li class="depth-1 "><a href="1000-quick-start.html"><div class="inner"><span>Quick Start</span></div></a></li><li class="depth-1  current"><a href="2000-usage.html"><div class="inner"><span>REST API Usage</span></div></a></li><li class="depth-1 "><a href="3000-dev.html"><div class="inner"><span>Development</span></div></a></li><li class="depth-1 "><a href="8000-marginalia.html"><div class="inner"><span>Marginalia</span></div></a></li><li class="depth-1 "><a href="9000-other-versions.html"><div class="inner"><span>Other Versions</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cmr</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opendap</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></div></li><li class="depth-4 branch"><a href="cmr.opendap.auth.acls.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>acls</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.auth.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.auth.permissions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>permissions</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.auth.roles.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>roles</span></div></a></li><li class="depth-4"><a href="cmr.opendap.auth.token.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>token</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>components</span></div></div></li><li class="depth-4 branch"><a href="cmr.opendap.components.caching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>caching</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.components.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.components.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.components.httpd.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>httpd</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.components.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-4"><a href="cmr.opendap.components.testing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>testing</span></div></a></li><li class="depth-3 branch"><a href="cmr.opendap.config.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="cmr.opendap.const.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>const</span></div></a></li><li class="depth-3 branch"><a href="cmr.opendap.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="cmr.opendap.errors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>errors</span></div></a></li><li class="depth-3 branch"><a href="cmr.opendap.health.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>health</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></div></li><li class="depth-4 branch"><a href="cmr.opendap.http.request.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></a></li><li class="depth-4"><a href="cmr.opendap.http.response.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>response</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>ous</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection</span></div></div></li><li class="depth-5 branch"><a href="cmr.opendap.ous.collection.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>params</span></div></div></li><li class="depth-6 branch"><a href="cmr.opendap.ous.collection.params.const.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>const</span></div></a></li><li class="depth-6 branch"><a href="cmr.opendap.ous.collection.params.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-6 branch"><a href="cmr.opendap.ous.collection.params.v1.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v1</span></div></a></li><li class="depth-6"><a href="cmr.opendap.ous.collection.params.v2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v2</span></div></a></li><li class="depth-5"><a href="cmr.opendap.ous.collection.results.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>results</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.ous.core.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.ous.granule.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>granule</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.ous.service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.ous.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-4"><a href="cmr.opendap.ous.variable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>variable</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>rest</span></div></div></li><li class="depth-4 branch"><a href="cmr.opendap.rest.app.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>app</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></div></li><li class="depth-5 branch"><a href="cmr.opendap.rest.handler.collection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection</span></div></a></li><li class="depth-5"><a href="cmr.opendap.rest.handler.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.rest.middleware.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-4"><a href="cmr.opendap.rest.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>site</span></div></div></li><li class="depth-4 branch"><a href="cmr.opendap.site.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-4 branch"><a href="cmr.opendap.site.pages.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pages</span></div></a></li><li class="depth-4"><a href="cmr.opendap.site.static.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>static</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>testing</span></div></div></li><li class="depth-4 branch"><a href="cmr.opendap.testing.system.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>system</span></div></a></li><li class="depth-4"><a href="cmr.opendap.testing.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-3"><a href="cmr.opendap.util.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#rest-api-usage" name="rest-api-usage"></a>REST API Usage</h1>
<p><strong>Contents</strong></p>
<ul>
  <li>REST API Overview</li>
  <li>OPeNDAP URL Service</li>
  <li>Authorized Access</li>
  <li>Collection Resource</li>
  <li>Forthcoming</li>
  <li>Miscellaneous Resources</li>
  <li>Health</li>
  <li>Ping</li>
</ul>
<h2><a href="#rest-api-overview" name="rest-api-overview"></a>REST API Overview</h2>
<p>The REST API for CMR OPeNDAP aims to accomplish a few core goals:</p>
<ul>
  <li>Provide a straight forward means of bridging the CMR and OPeNDAP deployments</li>
  <li>Provide operational insights into the CMR OPeNDAP REST service itself</li>
  <li>Do both of these as simply and in as scalable a manner as possible</li>
</ul>
<p>The REST API is currently focused on generating OPeNDAP data access URLs, allowing users to easily download subsetted files from OPeNDAP servers based on metadata stored in the CMR and presented to end users by EDSC.</p>
<h2><a href="#opendap-url-service" name="opendap-url-service"></a>OPeNDAP URL Service</h2>
<p>This is the part of the REST API responsible for creating OPeNDAP-compatible query URLs (intended to be sent to a deployed OPeNDAP service).</p>
<h3><a href="#authorized-access" name="authorized-access"></a>Authorized Access</h3>
<p>CMR OPeNDAP requires the use of tokens in order to provide access to potentially protected collections, services, variables, and/or granules.</p>
<p>A token needs to be included in each request, and this is done by sending a special header:</p>
<pre><code>"Echo-Token: &lt;YOUR_TOKEN&gt;"
</code></pre>
<p>For example, if you have stored your token in a file:</p>
<pre><code>"Echo-Token: `cat ~/.cmr/tokens/sit`"
</code></pre>
<p>Both ECHO as well as URS/Earthdata Login tokens are supported.</p>
<h3><a href="#collection-resource" name="collection-resource"></a>Collection Resource</h3>
<p>The following calls are supported</p>
<ul>
  <li><code>GET /opendap/ous/collection/:concept-id</code></li>
</ul>
<p>This can be used in the following manner:</p>
<pre><code>curl --silent \
     -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS" | \
     jq .
</code></pre>
<pre><code class="json">{
  "hits": 2,
  "took": 0.621,
  "items": [
    "https://acdisc.gesdisc.eosdis.nasa.gov/opendap/Aqua_AIRS_Level3/AIRX3STD.006..."
  ]
}
</code></pre>
<h4><a href="#parameters" name="parameters"></a>Parameters</h4>
<p>The example above will generate a URL for downloading all the granules and all the variables across the globe for the given collection. To limit these, there are various parameters supported:</p>
<ul>
  <li><code>format</code></li>
  <li><code>granules</code></li>
  <li><code>exclude-granules</code></li>
  <li><code>variables</code></li>
  <li><code>bounding-box</code></li>
</ul>
<p>These may be used alone or in any combination. Details for usage are provided below in separate sections.</p>
<p>Note that both hypens and underscores are supported in parameters that have them; you may use either, per your preference.</p>
<h5><code>format</code></h5>
<p>This allows the client to ask OPeNDAP to provide files in the given format.</p>
<p>If not provided, the default of <code>nc</code> (NetCDF) is used. Supported formats depend upon the target OPeNDAP server.</p>
<p>Parameter example:</p>
<pre><code>format=nc
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?format=nc"
</code></pre>
<h5><code>granules</code></h5>
<p>This allows the client to select the granules to include (or exclude) in their OPeNDAP queries.</p>
<p>If not provided, all granules for the given collection will be used. If used in conjunction with the <code>exclude-granules</code> parameter, then all granules <em>except</em> the ones passed will be used in the OPeNDAP query.</p>
<p>The following are examples of accepted <code>granules</code> parameter usage:</p>
<pre><code>granules=G1200187775-EDF_OPS
granules=G1200187775-EDF_OPS,G1200245955-EDF_OPS
granules=G1200187775-EDF_OPS&amp;granules=G1200245955-EDF_OPS
granules[]=G1200187775-EDF_OPS&amp;granules[]=G1200245955-EDF_OPS
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?granules=G1200187775-EDF_OPS,G1200245955-EDF_OPS"
</code></pre>
<h5><code>exclude-granules</code></h5>
<p>This allows clients to perform the inverse of a granule search: all granules <em>except</em> the ones passed. Granules may either be pass</p>
<p>If not provided, a regular granule search is performed.</p>
<p>Parameter examples:</p>
<pre><code>exclude-granules=true&amp;granules=G1200187775-EDF_OPS
</code></pre>
<p>Note that the <code>granules</code> parameter here may take any of the accepted forms shown in the previous section.</p>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?exclude-granules=true&amp;granules=G1200187775-EDF_OPS"
</code></pre>
<h5><code>variables</code></h5>
<p>This proivdes clients with the ability to limit the granule data extracted by the OPeNDAP query to just the variables in which you are interested.</p>
<p>If not provided, all variables associated in the collection metadata will be used.</p>
<p>The following are examples of accepted <code>variables</code> parameter usage:</p>
<pre><code>variables=V1200241812-EDF_OPS
variables=V1200241812-EDF_OPS,V1200241817-EDF_OPS
variables=V1200241812-EDF_OPS&amp;variables=V1200241817-EDF_OPS
variables[]=V1200241812-EDF_OPS&amp;variables[]=V1200241817-EDF_OPS
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?variables=V1200241812-EDF_OPS,V1200241817-EDF_OPS"
</code></pre>
<h5><code>bounding-box</code></h5>
<p>This provides clients with the ability to select the spatial data to include in the granule data extracted by the OPeNDAP query to an area of interest.</p>
<p>If not provided, the entire spatial extent of the granule will be used.</p>
<p>Parameter example:</p>
<pre><code>bounding-box=-9.984375,56.109375,19.828125,67.640625
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?variables=V1200241812-EDF_OPS,V1200241817-EDF_OPS&amp;bounding-box=-9.984375,56.109375,19.828125,67.640625"
</code></pre>
<h4><a href="#wcs-style-parameters" name="wcs-style-parameters"></a>WCS-Style Parameters</h4>
<p>The original implementation of the OPeNDAP URL translation service was not a part of the CMR, and thus did not take into consideration the internal standards adopted by both the CMR and EDSC code bases. Instead, it was decided to follow the model of <a href="http://mapserver.org/ogc/wcs_server.html#wcs-2-0-kvp-request-parameters">WCS</a>. As such, the following parameters are also available, as an alternative to the “classic” CMR/EDSC parameters:</p>
<ul>
  <li><code>format</code></li>
  <li><code>coverage</code></li>
  <li><code>rangesubset</code></li>
  <li><code>subset</code></li>
</ul>
<p>These are show in more detail in the sub-sections below.</p>
<p>Note that WCS-style and CMR/EDSC-style parameters may not be mixed in the same request; you must chose one or the other, not both.</p>
<h5><code>format</code></h5>
<p>This allows the client to ask OPeNDAP to provide files in the given format.</p>
<p>If not provided, the default of <code>nc</code> (NetCDF) is used. Supported formats depend upon the target OPeNDAP server.</p>
<p>Parameter example:</p>
<pre><code>format=nc
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?format=nc"
</code></pre>
<h5><code>coverage</code></h5>
<p>This allows the client to select the granules to include (or exclude) in their OPeNDAP queries.</p>
<p>If not provided, all granules for the given collection will be used.</p>
<p>The following are examples of accepted <code>coverage</code> parameter usage:</p>
<pre><code>coverage=G1200187775-EDF_OPS
coverage=G1200187775-EDF_OPS,G1200245955-EDF_OPS
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?coverage=G1200187775-EDF_OPS,G1200245955-EDF_OPS"
</code></pre>
<h5><code>rangesubset</code></h5>
<p>This proivdes clients with the ability to limit the granule data extracted by the OPeNDAP query to just the variables in which you are interested.</p>
<p>If not provided, all variables associated in the collection metadata will be used.</p>
<p>The following are examples of accepted <code>rangesubset</code> parameter usage:</p>
<pre><code>rangesubset=V1200241812-EDF_OPS
rangesubset=V1200241812-EDF_OPS,V1200241817-EDF_OPS
</code></pre>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?rangesubset=V1200241812-EDF_OPS,V1200241817-EDF_OPS"
</code></pre>
<h5><code>subset</code></h5>
<p>This provides clients with the ability to select the spatial data to include in the granule data extracted by the OPeNDAP query to an area of interest.</p>
<p>If not provided, the entire spatial extent of the granule will be used.</p>
<p>Parameter example:</p>
<pre><code>subset=lat(56.109375,67.640625)
subset=lon(-9.984375,19.828125)
</code></pre>
<p>Note that both are needed in order to define a bounding box.</p>
<p>Example usage:</p>
<pre><code>curl -H "Echo-Token: `cat ~/.cmr/tokens/sit`" \
     "%%OPENDAP_BASE_URL%%ous/collection/C1200187767-EDF_OPS?variables=V1200241812-EDF_OPS,V1200241817-EDF_OPS&amp;subset=lat(56.109375,67.640625)&amp;subset=lon(-9.984375,19.828125)"
</code></pre>
<h3><a href="#forthcoming" name="forthcoming"></a>Forthcoming</h3>
<p>The following are coming soon:</p>
<ul>
  <li><code>POST /opendap/ous/collection/:concept-id</code></li>
  <li><code>POST /opendap/ous/collections</code></li>
</ul>
<h2><a href="#miscellaneous-resources" name="miscellaneous-resources"></a>Miscellaneous Resources</h2>
<h3><a href="#health" name="health"></a>Health</h3>
<ul>
  <li><code>GET     /opendap/health</code></li>
  <li><code>OPTIONS /opendap/health</code></li>
</ul>
<h3><a href="#ping" name="ping"></a>Ping</h3>
<p>Administrative users may use a token to access the following:</p>
<ul>
  <li><code>GET     /opendap/ping</code></li>
  <li><code>POST    /opendap/ping</code></li>
  <li><code>OPTIONS /opendap/ping</code></li>
</ul></div></div></div><script src="https://fbm.earthdata.nasa.gov/for/CMR/feedback.js" type="text/javascript"></script></body></html>