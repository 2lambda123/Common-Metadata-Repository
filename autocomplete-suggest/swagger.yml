---
openapi: 3.0.0
info:
  title: CMR Autocomplete API
  description: Autocomplete usage
  version: 0.1.0

paths:
  /search/collection/autocomplete:
    get:
      tags:
        - autocomplete
      summary: Autocomplete end-point
      description: Returns a list of autocomplete-suggestions
      parameters:
        - name: q
          in: query
          required: true
          example: ice
          schema:
            type: string
        - name: type
          description: optional comma separated list of types to include
          examples:
            single:
              value: platform
            multi:
              value: 'platform,project,instrument,science_keywords'
          in: query
          required: false
          schema:
            type: string
            enum:
              - platforms
              - instruments
              - projects
              - temporal_keywords
              - providers
              - spatial_keywords
              - science_keywords
              - archive_centers
              - data_centers
              - granule-data-format
              - measurement-name
      responses:
        '200':
          description: A suggestion response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuggestionResponse'
              example:
                query: ex
                results:
                  - type: platform
                    suggestions:
                      - EXOS-A
                      - EXPLORER-9
                  - type: instrument
                    suggestions:
                      - EXRAD
                  - type: provider
                    suggestions:
                      - PURDUE/EXTENSION

        '400':
          description: Bad query or not term provided

  /search/collection/autocomplete/types:
    get:
      tags:
        - autocomplete
      summary: Return valid facet types to filter with
      description: Returns a list of autocomplete-suggestion valid types available to filter
      responses:
        '200':
          description: List of available types to search for with the main endpoint
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
              example: ['platform', 'instrument', 'project', 'provider', 'spatial_keyword']

components:
  schemas:
    SuggestionResponse:
      properties:
        query:
          description: Original term provided
          type: string
        results:
          type: array
          items:
            $ref: '#/components/schemas/SuggestionCollection'
    SuggestionCollection:
      properties:
        type:
          type: string
          example: platform
        suggestions:
          type: array
          items:
            example: '"EXOS-A","EROS-A1","ALOS-2","ALOS"'
            type: string
